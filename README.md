# Caneka

The Glass-Bottom-Boat of Programming Language Runtimes.

## Overview

What could you do if you know what happened between your programming
language and the hardware?

Caneka is a full-stack + web-server + database replacement for a web
development runtime. Based entirely on simplistic components written
from scratch in C.

## Purpose

Caneka was born from the idea that programming langauges had evolved
somewhat haphazardly

- Level 1 Assembly
- Level 2 Types (C)
- Level 3 Objects (C++, Java, JavaScript, Python, Etc.)
- Level 4 Composition/Implicit Handling (?)

It seams like we never got to that Level 4. A place where composition,
Lisp, Scala, Rust, C# all come close with pattern matching features,
but it feels to us like configuration and composition have remained 
outside of all major languages thus far. 

The determination to start from scratch is an effort to accomplish a
syntax-agnostic runtime while building transparency and reliability at
the same time.

This also solves the "many dependencies" problem, by encompasing every
essential feature of a software application in one place. Caneka does not 
require any features outside of a POSIX compliant operating system and
a C compiler.

Components are linked as necissary for features such as crypto and 
network handling (such as NaCL and eventually SSL). And the build system
is design for extensability with other software sources.

## The Parser

Think of it like "a regular expression engine that can generate and run data
structures".

The goal of this approach is to increase configuration and encourage teams to
map their problem space more directly, using less lines of boiler-plate code.

This is commonly refered to as a Domain Specific Language.

Since the dawn of computing, all computer tasks have been accomplished through
a combination of user-interaction, protocols, markups, and programming
langauges. Caneka aims to allow software development to include the definition
of the langauge syntax. 

For this analogy, here are examples from each category:

Protocols: DNS, HTTP, SMTP/LMTP
Protocols (binary): TLS, WebSockets, TCP/IP, Bluetooth, WiFi, Serial
Markups: CSV, XML, JSON, YAML, CBOR, HTML, LaTeX, PDF
Programming Langauges: Java, Python, TypeScript/Javascript, Go, Scala, Rust...

The comonality between items within each category speaks to the value of
customizaton, and also highlights the challenges of conformity.

# Caneka Components

Caneka has three main components including a parser with no prefered syntax, a
network server, and a memory manager for data storage and data structures.

Components:

- [base](src/base/): includes virtual memory segmented strings,
  scalable arrays, a key-value lookup, and the memory manager.
- [ext](/src/ext/): All other features, including the Seel class system
  found in [types](/src/ext/types). This includes the
  [parser](/src/ext/parser/) and the network server [serve](/src/ext/serve/) 
  which relies heavily on the Task/Step components in the
  [navigate](/src/ext/navigate/) sub-module.
- [inter](/src/inter) Higher level components such as HTTP handling
  an HTTP Webserver including session handling and user management.
- [programs](/src/programs/): Any programs that ship with the source
  will be in this folder, presently [tests](src/programs/tests) is the
  only meaningful program in this folder.

see [caneka.org](https://caneka.org) for more details.

## Build Instructions

To build and test Caneka run:

    clang -o bootstrap bootstrap.c && ./bootstrap 

and eventually, this will be supported:

    gcc -o bootstrap bootstrap.c && ./bootstrap 

Note: there is a bug when compling with gcc related to the order of static libs.

This will compile and run the bootstrap program which manages building the rest
of the modules.

### CnkBuild - source builder

Canka only requires a C compiler to build. A small library is built to manage
the build configuration(s) (found in the [cnkbuild](./src/programs/cnkbuild/)
folder). The file [bootstrap.c](./bootstrap.c) in the root directory builds a
which menu to manage the build process.

Each folder within the [src](/src) artifact folder, have a file in
them which controls how they are built. Either as one include file such as (in
the case of [base/inc.c](/src/base/inc.c) or with a more eleborate
"build.c" file. Every module after the "base" is built using the "build.c"
file, which is used by "cnkbuild" builder.

Further customization can be found in the dependencies.txt files for each
module. 

## Why Is It So Hard To Read The Source Code? 

In it's present form Caneka is not intended to be modified by human authors.
What you see now is inteneded to be generated by a transpiler which has
not yet been written. You will notice that a lot of rudimentary calls such as
`Table_Set`, `MemCh_AllocOf` and `StrVec_AddVec` are increadibly verbose
and unfriendly to read. This is by design with the intention of a cleaner
syntax sitting on top of this.

Preserving the ability to debug and perform all necissary tasks simplisticly
has been the focus this far. The system will round the corder into readability
in the near future.

## Build Status

The system is currently being updated to include a new base, all components
have worked in prototype form at one time or another, but it's currently a
shit-show.

## Licence

BSD 3 Clause: [licence file](./LICENCE)

Caneka is a brand of Compare Basic, read more at
[comparebasic.com](https://comparebasic.com)
